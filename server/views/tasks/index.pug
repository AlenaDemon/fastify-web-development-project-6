extends ../layouts/application.pug

block header 
  =t('views.tasks.tasks')
  
block headerAction
  a.btn.btn-primary.mb-5(href="/tasks/new")= t('views.tasks.create')

block content
  .card.shadow-sm
    .card-body.p-4
      +formFor()(action=route('tasks') method='get')
        .row
          .col-12.col-md
            +select(entity, 'statusId', statuses, errors)
          .col-12.col-md
            +select(entity, 'executorId', users, errors)
          .col-12.col-md
            +select(entity, 'label', [], errors)
        +checkbox(entity, 'isCreatorUser', t('views.tasks.checkbox'), errors)
        +submit()(value=t('views.tasks.show'))

  .table-responsive
    table.table.table-borderless.table-striped.mt-5.bg-white
      thead
        tr
          th= t('views.tasks.id')
          th= t('views.tasks.name')
          th= t('views.tasks.statusId')
          th= t('views.tasks.author')
          th= t('views.tasks.executorId')
          th= t('views.statuses.createdAt')
      tbody
        each task in tasks
          tr
            td= task.id
            td= task.name
            td= task.status.name
            td= task.author.firstName
            td= task.executor.firstName
            td= formatDate(task.createdAt)
            td
              div.d-flex.flex-wrap
                a.btn.btn-primary.me-1(href=route('updateTask', { "id": task.id.toString() }))= t('views.change')
                +buttonTo(`/tasks/${task.id}`, 'delete')(
                  class="btn btn-danger"
                  value=t('views.delete')
                  method="delete"
                )